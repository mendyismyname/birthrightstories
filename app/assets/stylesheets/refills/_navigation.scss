
$nav-base-color: white;
$nav-background: $taglit-blue;
$nav-color: transparentize($nav-base-color, 0.05);
$nav-color-hover: $nav-base-color;
$nav-background: $taglit-blue;
$nav-border-bottom-width: 3px;
$nav-side-section-width: 30%;
$nav-side-section-width-small: 20%;

$nav-height-minimized: 60px;
$nav-height-expanded: 300px;

%nav-bg{
  background-color: $nav-background;
  border-bottom: $nav-border-bottom-width solid transparentize(white, 0.2);
  font-family: $header-font-family;
  // font-weight: bold;
  color: $nav-color;
}
%nav-styling{
  @include transition (height 0.3s ease-in-out);

  .nav-container,
  .nav-panel-wrapper {
    max-height: 100%;
    @include transition (all 0.3s ease-in-out);
  }
  .nav-follow-up a{
    @extend button;
  }
}

%nav-layout{
  height: $nav-height-expanded;
  width: 100%;
  z-index: 999;
  position: fixed;

  .nav-container{
    @include outer-container;
    @include clearfix;    
    width: 100%;
    max-width: 80em;
    position: relative;
    margin: auto;
    height: 100%;
  }
  .nav-wrapper{

  }
  .nav-wrapper,
  .nav-logo-wrapper,
  .nav-panel,
  .nav-locale-menu-wrapper{
    width: 100%;
    height: 100%;  

  }
  .nav-panel{
  }
  .nav-logo{
    @include position(absolute, 0 auto 0 0);
  }
  .nav-locale-menu{
    @include position(absolute, 0 0 0 auto);
  }
  .nav-logo-wrapper,
  .nav-locale-menu-wrapper{
    position: relative;
  }
  .nav-logo-wrapper{
    text-align: left;
  }
  .nav-locale-menu-wrapper{
    text-align: right;
    .nav-locale-menu-link{
      @include vertical-align;
    }
    span.taglit{
      line-height: $nav-height-minimized;
      vertical-align: top;
    }
    padding-right: 1em;
  }  
  .nav-logo{}
  .nav-panel-wrapper{
    @include vertical-align;
    text-align: center;
  }

}

%nav-resizing{

  .nav-panel{
    .nav-story-count,
    .nav-headline,
    .nav-follow-up,
    .nav-learn-more {
      min-width: 100%;
      // width: 100%;
      opacity: 0;

      @include media(em(960)) {
        opacity: 1;
      }
    }
  }

  &.smaller{
    height: $nav-height-minimized;

    .nav-container{
      max-width: 100%;
    }
    .nav-locale-menu-link img{
      height: $nav-height-minimized / 2;
      padding: 5px 0;
    }

    .nav-panel{
      // .nav-panel-wrapper{
      //   max-height: $nav-height-minimized;
      // }
      .nav-story-count,
      .nav-headline,
      .nav-follow-up,
      .nav-learn-more {
        opacity: 0;
        display: inline-block;

        @include media(em(960)) {
          opacity: 1;
          // min-width: 100%;
          min-width: 0;
        }
      }
    }


  }
}

%nav-drawer{
  .nav-drawer{
    max-height: 0;
    height: 0;
    overflow-y: hidden;
    width: 100%;
    position: fixed;

    @extend %nav-bg;
    @include transition (all 0.3s $ease-out-quart);

    &.opened{
      max-height: 400px;
      height: 400px;      
    }

    .nav-drawer-wrapper{
      @include outer-container;
      @include clearfix;
      position: relative;
      z-index: 999;      
      max-width: 45em;
      padding: 5em 0;

      h1{
        font-weight: 700;
      }
      h3 {
        font-weight: 700;
        padding-top: 0.3em;
        padding-bottom: 0.6em;
      }
      p{
        // padding: 0.2em 0;
      }
    }
  }
  .nav-drawer-wrapper{}
  .nav-drawer-wrapper-close{
    position: absolute;
    right: 2em;
    bottom: 2em;    
  }
}

header.nav{

  @extend %nav-bg;
  @extend %nav-layout;
  @extend %nav-styling;
  @extend %nav-resizing;
  @extend %nav-drawer;

  .nav-wrapper{
 
  }


  .nav-logo-wrapper{

  }
  .nav-locale-menu-wrapper{

  }  
  .nav-logo{
    img {
      max-height: 100%;
      opacity: .9;
      @include transition (all 0.3s ease-in-out);
      padding: 1em;
    }
  }
  .nav-panel-wrapper{

  }
  .nav-panel{


    .nav-story-count{}
    .nav-headline{}
    .nav-follow-up{}
    .nav-learn-more{}
  }
  .nav-locale-menu{
  }
  .nav-locale-menu-link{

  }



  // Localization menu
  .nav-locale-menu{
    // display: inline-block;
    // float: right;
    // text-align: right;
    // height: 100%;
    // width: $nav-side-section-width;
    // max-width: $nav-side-section-width;
    @include transition (all 0.01s $ease-out-quart);

    // a{
    //   line-height: $nav-height-expanded;
    // }
    // span.taglit{
    //   text-transform: uppercase;
    //   font-size: 1.3em;
    //   vertical-align: top;
    // }
    // img{
    //   max-height: 100%;
    //   line-height: 0;
    // }
    


    // Mechanics for showing the dropdown
    .nav-locale-menu-link:hover > .nav-locale-menu-submenu {
      display: block;
    }
  }
    // Localization submenu
  ul.nav-locale-menu-submenu{

    display: none;
    // display: block;

    width: 12em;

    background-color: $nav-background;
    border-radius: $base-border-radius;
    padding: 35px;
    // position: relative;
    position: absolute;
    // top: -5em;
    // right: -2.5em;
    // top: -0.1em;
    right: 0;

    a{
      // line-height: $nav-height-expanded / 2;
    }     
    li {
      @include clearfix;
      &:hover span.locale-flag{
        opacity: 1;
      }
    }
    span.locale-name{
      float: left;
    }
    span.locale-flag{
      @include transition (all 0.3s ease-in-out);
      float:right;
      opacity: 0.7;
    }    
  }  

}
.nav-buffer{
  height: $nav-height-expanded;
  display: block;
  // @extend %nav-bg;

  background-color: rgba(0,158,220,0);
  // @include filter-gradient(#009edc, #009edc, vertical);
  
  // @include filter-gradient(#009edc, #009edc, vertical);
  @include background-image(linear-gradient(top, rgba(0,158,220,1) 0%, rgba(0,158,220,0) 100%));
  // @include background-image(linear-gradient(top, rgba(0,158,220,0) 0%, rgba(0,158,220,1) 100%));  
}